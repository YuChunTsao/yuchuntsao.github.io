{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var t=a=>l(a,\"__esModule\",{value:!0});var N=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),k=(a,s)=>{t(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},g=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of h(s))!u.call(a,n)&&n!==\"default\"&&l(a,n,{get:()=>s[n],enumerable:!(c=p(s,n))||c.enumerable});return a},b=a=>g(t(l(a!=null?d(m(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=N((_,i)=>{i.exports=_jsx_runtime});var S={};k(S,{default:()=>y,frontmatter:()=>f});var e=b(r()),f={title:\"Import OSM data into PostGIS with osm2pgsql\",date:\"2023-01-08\",tags:[\"osm2pgsql\",\"OpenStreetMap\",\"PostGIS\"],draft:!1,summary:null};function w(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",blockquote:\"blockquote\",p:\"p\",code:\"code\",pre:\"pre\",h3:\"h3\",div:\"div\"},a.components),{Image:o}=n;return o||q(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"prerequisites\",children:[(0,e.jsx)(n.a,{href:\"#prerequisites\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Prerequisites\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"PostGIS\"}),(0,e.jsx)(n.li,{children:\"osm2pgsql\"})]}),(0,e.jsxs)(n.blockquote,{children:[(0,e.jsx)(n.p,{children:\"Related articles:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://yuchuntsao.github.io/blog/2022/how-to-setup-postgis-with-docker\",children:\"How to setup PostGIS with docker?\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://yuchuntsao.github.io/blog/2023/how-to-install-osm2pgsql-on-ubuntu-18-04\",children:\"How to install osm2pgsql on ubuntu 18.04?\"})})]})]}),(0,e.jsxs)(n.h2,{id:\"preparing-the-database\",children:[(0,e.jsx)(n.a,{href:\"#preparing-the-database\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Preparing the database\"]}),(0,e.jsxs)(n.p,{children:[\"In this article, I will use docker to create the database. You can also install PostgreSQL/PostGIS on your machine (Follow the instrcution from the official documentation: \",(0,e.jsx)(n.a,{href:\"https://osm2pgsql.org/doc/manual.html#preparing-the-database\",children:\"Preparing the Database\"}),\").\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"docker-compose.yml\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` postgis/postgis\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"container_name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" osm2pgsql\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`postgis\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" POSTGRES_USER=$\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"POSTGRES_USER\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" POSTGRES_PASSWORD=$\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"POSTGRES_PASSWORD\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" POSTGRES_DB=$\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"POSTGRES_DB\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` PGDATA=/var/lib/postgresql/data/pgdata\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'${POSTGRES_PORT}:5432'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" $\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"PWD\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\"/pgdata\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD-SHELL'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'pg_isready'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 5s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"pgdata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Run postgis container with docker compose\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`docker-compose up -d\n`})})}),(0,e.jsx)(n.p,{children:\"Create user and database for using osm2pgsql.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[\"user: \",(0,e.jsx)(n.code,{children:\"osmuser\"})]}),(0,e.jsxs)(n.li,{children:[\"database: \",(0,e.jsx)(n.code,{children:\"osm\"})]})]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"docker-compose \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),\" postgis psql -U postgres -c \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"create user osmuser with encrypted password 'osmuser-password';\"`}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"docker-compose \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),\" postgis psql -U postgres -c \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"create database osm owner osmuser;\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"docker-compose \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),\" postgis psql -U postgres -d osm -c \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"create extension postgis;\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"docker-compose \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),\" postgis psql -U postgres -d osm -c \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"create extension hstore;\"'}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Connect to osm database with osmuser.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"docker-compose \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),` postgis psql -d osm -U osmuser\n`]})})}),(0,e.jsxs)(n.p,{children:[\"You can use \",(0,e.jsx)(n.code,{children:\"\\\\c\"}),\" to check connection information.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ docker-compose \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),` postgis psql -d osm -U osmuser\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"psql \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"13.2\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"Debian \",(0,e.jsx)(n.span,{className:\"token number\",children:\"13.2\"}),\"-1.pgdg100+1\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"))\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Type \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"help\"'}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),` help.\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"osm\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`c\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"You are now connected to database \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"osm\"'}),\" as user \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"osmuser\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]})]})}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"You can use your favorite database tool to connect to the database.\"})}),(0,e.jsxs)(n.h2,{id:\"using-osm2pgsql-import-osm-data-into-postgis\",children:[(0,e.jsx)(n.a,{href:\"#using-osm2pgsql-import-osm-data-into-postgis\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Using osm2pgsql import OSM data into PostGIS\"]}),(0,e.jsxs)(n.h3,{id:\"download-osm-data\",children:[(0,e.jsx)(n.a,{href:\"#download-osm-data\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Download OSM data\"]}),(0,e.jsx)(n.p,{children:\"OpenStreetMap data can download or extract from different services.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://download.geofabrik.de/\",children:\"geofabrik downloads\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.openstreetmap.org/export\",children:\"Export - OpenStreetMap\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://overpass-turbo.eu/\",children:\"overpass turbo\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://app.protomaps.com/downloads\",children:\"protomaps downloads\"})}),(0,e.jsx)(n.li,{children:\"...\"})]}),(0,e.jsxs)(n.p,{children:[\"In this article, I download \",(0,e.jsx)(n.a,{href:\"http://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf\",children:\"liechtenstein-latest.osm.pbf\"}),\" from geofabrik to try the import.\"]}),(0,e.jsx)(n.blockquote,{children:(0,e.jsxs)(n.p,{children:[\"The osm2pgsql documentation describes how to get OSM data: \",(0,e.jsx)(n.a,{href:\"https://osm2pgsql.org/doc/manual.html#getting-and-preparing-osm-data\",children:\"Getting and Preparing OSM Data\"})]})}),(0,e.jsxs)(n.h3,{id:\"import-osm-data\",children:[(0,e.jsx)(n.a,{href:\"#import-osm-data\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Import OSM data\"]}),(0,e.jsx)(n.p,{children:\"You have to tell osm2pgsql which database to access. In my case, I want to connect to a postgis container.\"}),(0,e.jsxs)(n.p,{children:[\"Usually osm2pgsql will autodetect the file format, but you can use \",(0,e.jsx)(n.code,{children:\"-r, --input-reader\"}),\" option to select format of the input file.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"osm2pgsql -H localhost -U osmuser -d osm -P \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5432\"}),` -W -c ./liechtenstein-latest.osm.pbf\n`]})})}),(0,e.jsxs)(n.blockquote,{children:[(0,e.jsx)(n.p,{children:\"For more detailed information, you can read the official document:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://osm2pgsql.org/doc/manual.html#database-connection\",children:\"Database connection\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://osm2pgsql.org/doc/manual.html#the-input\",children:\"The Input\"})})]})]}),(0,e.jsxs)(n.h3,{id:\"check-data-in-postgis\",children:[(0,e.jsx)(n.a,{href:\"#check-data-in-postgis\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Check data in postgis\"]}),(0,e.jsxs)(n.p,{children:[\"Connect to postgis and use \",(0,e.jsx)(n.code,{children:\"\\\\dt\"}),\" to show tables.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ docker-compose \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),` postgis psql -d osm -U osmuser\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"psql \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"13.2\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"Debian \",(0,e.jsx)(n.span,{className:\"token number\",children:\"13.2\"}),\"-1.pgdg100+1\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"))\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Type \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"help\"'}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),` help.\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"osm\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`dt\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`               List of relations\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" Schema \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\"        Name        \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" Type  \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),`  Owner\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`--------+--------------------+-------+----------\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" public \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" planet_osm_line    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" table \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),` osmuser\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" public \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" planet_osm_point   \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" table \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),` osmuser\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" public \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" planet_osm_polygon \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" table \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),` osmuser\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" public \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" planet_osm_roads   \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" table \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),` osmuser\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" public \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" spatial_ref_sys    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" table \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),` postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),\" rows\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"You can use SQL query to check geometry data.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"osm\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"select\"}),\" osm_id, ST_AsText\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"way\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" geometry from planet_osm_point limit \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"   osm_id   \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),`                  geometry\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`------------+---------------------------------------------\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8071657539\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" POINT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1064969.6124648296\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5981399.637550142\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8071657541\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" POINT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1065027.5431278383\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5981494.885103285\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3891992171\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" POINT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1065878.881197578\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5981755.169248388\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"7821023400\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" POINT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1065010.7450166778\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5981878.214184752\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token number\",children:\"966230920\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" POINT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1063066.1048320099\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5990334.432385214\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),\" rows\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"You can use other applications to preview the data.\"}),(0,e.jsxs)(n.p,{children:[\"The following figure previews the data through \",(0,e.jsx)(n.a,{href:\"https://dbeaver.io/\",children:\"DBeaver\"}),\".\"]}),(0,e.jsx)(n.div,{children:(0,e.jsx)(o,{alt:\"preview-osm-data-with-dbeaver\",src:\"/static/images/2023/import-osm-data-into-postgis-with-osm2pgsql/preview-osm-data-with-dbeaver.png\",width:\"1318\",height:\"883\"})}),(0,e.jsx)(n.blockquote,{children:(0,e.jsxs)(n.p,{children:[\"osm2pgsql default projection is Web Mercator (\",(0,e.jsx)(n.a,{href:\"https://epsg.io/3857\",children:\"EPSG:3857\"}),\"), you can use lua script to set projection.\"]})}),(0,e.jsxs)(n.h2,{id:\"references\",children:[(0,e.jsx)(n.a,{href:\"#references\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"References\"]}),(0,e.jsx)(n.ul,{children:(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://osm2pgsql.org/doc/manual.html\",children:\"OSM2PGSQL MANUAL\"})})})]})}}var y=w;function q(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return S;})();\n;return Component;","toc":[{"value":"Prerequisites","url":"#prerequisites","depth":2},{"value":"Preparing the database","url":"#preparing-the-database","depth":2},{"value":"Using osm2pgsql import OSM data into PostGIS","url":"#using-osm2pgsql-import-osm-data-into-postgis","depth":2},{"value":"Download OSM data","url":"#download-osm-data","depth":3},{"value":"Import OSM data","url":"#import-osm-data","depth":3},{"value":"Check data in postgis","url":"#check-data-in-postgis","depth":3},{"value":"References","url":"#references","depth":2}],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.73,"time":223800,"words":746},"slug":"2023/import-osm-data-into-postgis-with-osm2pgsql","fileName":"2023/import-osm-data-into-postgis-with-osm2pgsql.md","title":"Import OSM data into PostGIS with osm2pgsql","date":"2023-01-08T00:00:00.000Z","tags":["osm2pgsql","OpenStreetMap","PostGIS"],"draft":false,"summary":null}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"YuChun Tsao","avatar":"/static/images/avatar.png","occupation":null,"company":null,"email":"tsao84672776@gmail.com","twitter":null,"linkedin":null,"github":"https://github.com/YuChunTsao","date":null}],"prev":{"title":"How to install osm2pgsql on ubuntu 18.04?","date":"2023-01-01T00:00:00.000Z","tags":["osm2pgsql"],"draft":false,"summary":null,"slug":"2023/how-to-install-osm2pgsql-on-ubuntu-18-04"},"next":{"title":"Extract OSM data with Osmium","date":"2023-01-15T00:00:00.000Z","tags":["Osmium","OpenStreetMap"],"draft":false,"summary":null,"slug":"2023/extract-osm-data-with-osmium"}},"__N_SSG":true}